var insureDetail={init:function(e){insureDetail.bind(e),insureDetail.registerHelper(),insureDetail.getInfo(e)},options:{},registerHelper:function(){Handlebars.registerHelper("status",function(e,n){return 0==e?"待支付":1==e?"已支付":2==e?"已出单":3==e?"已生效":4==e?"已终止":5==e?"已拒保":6==e?"已取消":void 0}),Handlebars.registerHelper("isTransfer",function(e,n){return 1==e?"是":0==e?"否":void 0}),Handlebars.registerHelper("class",function(e,n){return e&&"null"!=e?"":"dis_none"}),Handlebars.registerHelper("telclass",function(e,n){return 1==e?"":0==e?"dis_none":e==-1?"dis_none":void 0}),Handlebars.registerHelper("money",function(e,n){return e>0?"":"dis_none"}),Handlebars.registerHelper("payEndTime",function(e,n){return 0==e?"":"dis_none"}),Handlebars.registerHelper("causeP",function(e,n){return 5==e?"":"dis_none"}),Handlebars.registerHelper("endTime",function(e,n){var r=Math.floor((e-new Date)/1e3/60/60/24),t=Math.floor((e-new Date)/1e3/60/60%24);return r<=0?t+"小时":r+"天"+t+"小时"}),Handlebars.registerHelper("teltoCallclass",function(e,n){return 0==e?"":"dis_none"}),Handlebars.registerHelper("isUsedCoupon",function(e,n){return 1==e?"":"dis_none"}),Handlebars.registerHelper("deleteclass",function(e,n){return 4==e||5==e||6==e?"":"dis_none"})},getInfo:function(e){var n={jqInsurance:"交强险",travelTax:"车船税",clssInsurance:"车辆损失险",dszzrInsurance:"第三者责任险",qcdqInsurance:"全车盗抢险",blddpsInsurance:"玻璃单独破碎险",zrssInsurance:"自燃损失险",ryzrSjInsurance:"车上人员责任险-司机",ryzrCkInsurance:"车上人员责任险-乘客",csghInsurance:"车身划痕险",ssssInsurance:"涉水损失险",cstyInsurance:"车损无法找到第三方特约险"},r={mptySzInsurance:"三责",mptyCsInsurance:"车损",mptySjInsurance:"司机",mptyZrInsurance:"自燃",mptyHhInsurance:"划痕",mptyCkInsurance:"乘客",mptyDqInsurance:"盗抢"};$.ajax({data:{oid:e},type:"GET",url:WX_ROOT+"insurance/getOrderInfo",beforeSend:function(){common.alert({stayTime:-1})},success:function(e){var t=JSON.parse(e);if(600==t.msgCode){var s=[],a="";for(var i in t.detail.consultPrice){if("-1"!=t.detail.consultPrice[i]&&n[i]){var o={};o.name=n[i],o.money=t.detail.consultPrice[i+"Money"],"0"!=t.detail.consultPrice[i+"Money"]&&s.push(o)}"0"!=t.detail.consultPrice[i]&&"-1"!=t.detail.consultPrice[i]&&r[i]&&(a+=r[i]+"、")}var l="",c="";$(s).each(function(e,n){"交强险"==n.name||"车船税"==n.name?l+="<p>-"+n.name+n.money+"元</p>":c+="<p>-"+n.name+n.money+"元</p>"});var u=Handlebars.compile($("#infoDiv").html());$(".bigContentDiv").html(u(t.detail)),$(".jqFromPaul").html("交强险保障期间："+t.detail.consultPrice.jqFromPaul+" 至 "+t.detail.consultPrice.endJqFromPaul),$(".syFromPaul").html("商业险保障期间："+t.detail.consultPrice.syFromPaul+" 至 "+t.detail.consultPrice.endSyFromPaul),$(".jqxInsuranceP").html(l),$(".syInsuranceP").html(c),0!=t.detail.consultPrice.deductibleMoney&&$(".syInsuranceP").append("-不计免赔("+a.substr(0,a.length-1)+")"+t.detail.consultPrice.deductibleMoney+"元")}common.alert({show:!1})}})},delPolicy:function(e,n){var r={};r.oid=e,r.token=n,$.ajax({url:WX_CORS,data:{url:"rest/app/order/delete",params:JSON.stringify(r)},type:"POST",success:function(e){600==e.code?common.close($(".delSection")):common.error()},timeout:3e3})},bind:function(e){$("body").on("tap",".ideleteBtn",function(){$(".bgDiv p.titleP").text("确定删除此订单吗"),$(".delBtnDiv p:nth-of-type(2)").addClass("ensureDelBtn").removeClass("ensureCancelBtn"),common.showId($(".delSection")),$(".cancelDelBtn").on("tap",function(){common.close($(".delSection"))}),$(".ensureDelBtn").on("tap",function(){var n=e;insureDetail.delPolicy(n,localStorage.getItem("token"))})})}};$(document).ready(function(){var e="";e=common.getUrlParameter("myInsurancePolicy_id")?common.getUrlParameter("myInsurancePolicy_id"):sessionStorage.getItem("myInsurancePolicy_id"),e?insureDetail.init(e):common.tips({msg:"哎哟，出异常了！"})});