var uploadPhoto={init:function(){uploadPhoto.author(),uploadPhoto.bind()},options:{signature:null,timestamp:null,nonceStr:null,appid:null},author:function(){var o,t=window.location.href.split("#")[0];uploadPhoto.options.signature||$.ajax({async:!1,data:{url:t},type:"GET",url:WX_ROOT+"wechat/signature",beforSend:function(){common.alert({stayTime:-1})},success:function(o){var t=JSON.parse(o);uploadPhoto.options.signature=t.signature,uploadPhoto.options.nonceStr=t.nonceStr,uploadPhoto.options.timestamp=t.timestamp,uploadPhoto.options.appid=t.appid},complete:function(){common.alert({show:!1})}}),uploadPhoto.share(uploadPhoto.options.appid,uploadPhoto.options.timestamp,uploadPhoto.options.signature,uploadPhoto.options.nonceStr,o)},share:function(o,t,n,a,i){wx.config({debug:!0,appId:o,timestamp:t,nonceStr:a,signature:n,jsApiList:["chooseImage","previewImage","uploadImage","downloadImage"]}),wx.ready(function(){}),wx.error(function(o){common.tips({msg:"获取授权证书失败！"})})},bind:function(){$(".upload-photo").on("tap",function(){wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(o){common.tips({msg:o.localIds}),$(".id-card img").prop("src",o.localIds[0])}})})}};$(document).ready(function(){uploadPhoto.init()});