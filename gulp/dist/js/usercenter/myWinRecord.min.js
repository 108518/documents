var winRecord={init:function(){winRecord.bind(),winRecord.registerHelper(),winRecord.getRecord(localStorage.getItem("token"),"1","20"),winRecord.getTotalNum(localStorage.getItem("token"))},options:{},registerHelper:function(){Handlebars.registerHelper("status",function(e,t){return 0==e?"待发放":1==e?"已发放":void 0}),Handlebars.registerHelper("time",function(e,t){return new Date(parseInt(e)).toLocaleString().replace(/:\d{1,2}$/," ")})},getRecord:function(e,t,n){$.ajax({data:{token:e,pageNumber:t,pageSize:n},type:"get",url:WX_ROOT+"usercenter/queryUserCjResult",beforeSend:function(){},success:function(e){if(600==JSON.parse(e).msgCode){var t=(JSON.parse(e).detail.list.length,Handlebars.compile($("#listDiv").html()));$(".allList").html(t(JSON.parse(e).detail.list)),$(".win").text(JSON.parse(e).detail.total)}else 610==JSON.parse(e).msgCode?common.tips({msg:"身份验证过期，请重新登录！",updateText:!0,stayTime:2e3,callback:function(){window.location.href=WX_ROOT+"base/login"}}):common.tips({msg:data.msg})}})},getTotalNum:function(e){$.ajax({data:{token:e},type:"get",url:WX_ROOT+"usercenter/queryCjResultCountByUserId",beforeSend:function(){common.alert({stayTime:-1})},success:function(e){600==JSON.parse(e).msgCode?$(".had").text(JSON.parse(e).detail):610==JSON.parse(e).msgCode?common.tips({msg:"身份验证过期，请重新登录！",updateText:!0,stayTime:2e3,callback:function(){window.location.href=WX_ROOT+"base/login"}}):common.tips({msg:data.msg}),common.alert({show:!1})}})},bind:function(){$(".btnDiv").on("tap",function(){window.location.href=WX_ROOT+"insurance/insureResult"}),$(".lotteryBtn").on("tap",function(){luckyLottery.lottery()}),$(".iKnowBtn").on("tap",function(){common.close($(".lotteryResultDiv"))})}};$(document).ready(function(){winRecord.init()});